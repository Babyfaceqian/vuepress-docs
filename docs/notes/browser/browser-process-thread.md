# 浏览器进程与线程

## 进程与线程
进程是系统分配资源的最小单位，进程与进程之间资源相互独立。进程包含线程，一个进程可以有多个线程，线程共享进程的资源，线程之间可以互相通信。

## 浏览器进程
浏览器是多进程的，包含Broswer主进程、第三方插件进程、GPU进程、渲染进程（内核）。
- broswer： 浏览器的主进程（负责协调、主控），只有一个。
- 第三方插件进程：每种类型的插件对应一个进程，仅当使用该插件时才创建
- GPU进程：最多一个，用于3D绘制
- 渲染进程（内核）：默认每个Tab页面一个进程，互不影响，控制页面渲染、脚本执行、事件处理等。（有时候会优化，如多个空白tab会合并成一个进程）

## 浏览器渲染进程
浏览器渲染进程，即浏览器内核，包含GUI线程、JS引擎线程、事件触发线程、定时器线程、网络请求线程。
- GUI线程：负责生成dom tree、css tree和render tree，并将render tree绘制到屏幕，与JS引擎线程互斥。
- JS引擎线程：单线程，负责执行js，常用的js引擎有V8。与GUI线程互斥。
- 事件触发线程：setTimeout
- 定时器线程：setInterval
- 网络请求线程：http请求等

## HTML5 web worker
由于JS引擎是单线程，在处理一些密集型或高延迟计算时会阻塞页面的渲染从而导致页面出现卡顿。并且，随着计算机计算能力的增强，单线程处理计算并不能充分发挥计算机的计算能力。
html5中的 web worker就是为了解决这一问题的。当JS主线程通过Worker构造函数新建Worker实例是，主线程会向浏览器申请开辟一个新的子线程给该Worker实例。主线程与worker线程之间互不干扰，当worker线程执行完毕，再把结果返回给主线程处理。